{"version":3,"sources":["webpack://@irony/google-search/webpack/bootstrap","webpack://@irony/google-search/./forum.js","webpack://@irony/google-search/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@irony/google-search/./src/forum/components/GoogleSearchList.js","webpack://@irony/google-search/./src/forum/components/GoogleSearchListItem.js","webpack://@irony/google-search/./src/forum/components/GoogleSearchPage.js","webpack://@irony/google-search/./src/forum/index.js","webpack://@irony/google-search/external \"flarum.core.compat['Component']\"","webpack://@irony/google-search/external \"flarum.core.compat['app']\"","webpack://@irony/google-search/external \"flarum.core.compat['components/Alert']\"","webpack://@irony/google-search/external \"flarum.core.compat['components/Button']\"","webpack://@irony/google-search/external \"flarum.core.compat['components/DiscussionsSearchSource']\"","webpack://@irony/google-search/external \"flarum.core.compat['components/IndexPage']\"","webpack://@irony/google-search/external \"flarum.core.compat['components/LinkButton']\"","webpack://@irony/google-search/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@irony/google-search/external \"flarum.core.compat['components/LogInModal']\"","webpack://@irony/google-search/external \"flarum.core.compat['components/Page']\"","webpack://@irony/google-search/external \"flarum.core.compat['components/Placeholder']\"","webpack://@irony/google-search/external \"flarum.core.compat['components/SelectDropdown']\"","webpack://@irony/google-search/external \"flarum.core.compat['extend']\"","webpack://@irony/google-search/external \"flarum.core.compat['helpers/listItems']\"","webpack://@irony/google-search/external \"flarum.core.compat['utils/ItemList']\""],"names":["GoogleSearchList","init","loading","moreResults","googleresults","refresh","view","params","props","LoadingIndicator","component","Button","children","app","translator","trans","className","onclick","loadMore","bind","length","text","Placeholder","q","map","info","GoogleSearchListItem","requestParams","clear","loadResults","then","results","parseResults","m","redraw","offset","preloadedLists","preloadedApiDocument","deferred","resolve","promise","request","method","url","forum","attribute","data","push","apply","lazyRedraw","removeList","list","index","indexOf","splice","addList","unshift","Component","title","content","GoogleSearchPage","oninit","vnode","bodyClass","previous","cache","googleSearchList","Object","keys","some","key","session","user","alertNotice","modal","show","LogInModal","onunload","scrollTop","$","window","IndexPage","prototype","hero","listItems","sidebarItems","toArray","actionItems","render","config","isInitialized","context","arguments","extend","css","setTitle","setTitleCount","oldHeroHeight","heroHeight","outerHeight","height","scroll","setTimeout","alert","alerts","Alert","type","dismiss","items","replace","SelectDropdown","navItems","buttonClassName","stickyParams","add","LinkButton","href","route","icon","ItemList","searching","clearSearch","routeName","param","Page","initializers","routes","irony_google_search","path","DiscussionsSearchSource","query","toLowerCase"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\r\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import app from \"flarum/app\";\r\nimport Component from \"flarum/Component\";\r\nimport Button from \"flarum/components/Button\";\r\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\r\nimport Placeholder from \"flarum/components/Placeholder\";\r\nimport GoogleSearchListItem from \"./GoogleSearchListItem\";\r\n\r\n/**\r\n * The `GoogleSearchList` component displays a list of search result.\r\n *\r\n * ### Props\r\n *\r\n * - `params` A map of parameters used to construct a refined parameter object\r\n *   to send along in the API request to get google search results.\r\n */\r\nexport default class GoogleSearchList extends Component {\r\n  init() {\r\n    /**\r\n     * Whether or not google search results are loading.\r\n     *\r\n     * @type {Boolean}\r\n     */\r\n    this.loading = true;\r\n\r\n    /**\r\n     * Whether or not there are more results that can be loaded.\r\n     *\r\n     * @type {Boolean}\r\n     */\r\n    this.moreResults = false;\r\n\r\n    /**\r\n     * the google search list.\r\n     *\r\n     * @type {Array}\r\n     */\r\n    this.googleresults = [];\r\n\r\n    this.refresh();\r\n  }\r\n\r\n  view() {\r\n    const params = this.props.params;\r\n    let loading;\r\n\r\n    if (this.loading) {\r\n      loading = LoadingIndicator.component();\r\n    } else if (this.moreResults) {\r\n      loading = Button.component({\r\n        children: app.translator.trans(\r\n          \"core.forum.discussion_list.load_more_button\"\r\n        ),\r\n        className: \"Button\",\r\n        onclick: this.loadMore.bind(this)\r\n      });\r\n    }\r\n\r\n    if (this.googleresults.length === 0 && !this.loading) {\r\n      const text = app.translator.trans(\r\n        \"irony-google-search.forum.page.empty_text\"\r\n      );\r\n      return (\r\n        <div className=\"DiscussionList\">{Placeholder.component({ text })}</div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div\r\n        className={\r\n          \"DiscussionList\" +\r\n          (this.props.params.q ? \" DiscussionList--searchResults\" : \"\")\r\n        }\r\n      >\r\n        <ul className=\"DiscussionList-discussions\">\r\n          {this.googleresults.map(info => {\r\n            return <li>{GoogleSearchListItem.component({ info, params })}</li>;\r\n          })}\r\n        </ul>\r\n        <div className=\"DiscussionList-loadMore\">{loading}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get the parameters that should be passed in the API request to get\r\n   * google search results.\r\n   *\r\n   * @return {Object}\r\n   * @api\r\n   */\r\n  requestParams() {\r\n    return this.props.params;\r\n  }\r\n\r\n  /**\r\n   * Clear and reload the google search list.\r\n   *\r\n   * @public\r\n   */\r\n  refresh(clear = true) {\r\n    if (clear) {\r\n      this.loading = true;\r\n      this.googleresults = [];\r\n    }\r\n\r\n    return this.loadResults().then(\r\n      results => {\r\n        this.googleresults = [];\r\n        this.parseResults(results);\r\n      },\r\n      () => {\r\n        this.loading = false;\r\n        m.redraw();\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Load a new page of google search results.\r\n   * 请求api获取数据\r\n   *\r\n   * @param {Integer} offset The index to start the page at.\r\n   * @return {Promise}\r\n   */\r\n  loadResults(offset) {\r\n    const preloadedLists = app.preloadedApiDocument();\r\n\r\n    if (preloadedLists) {\r\n      return m.deferred().resolve(preloadedLists).promise;\r\n    }\r\n\r\n    return app\r\n      .request({\r\n        method: \"GET\",\r\n        url: app.forum.attribute(\"apiUrl\") + \"/google/search\",\r\n        data: this.requestParams()\r\n      })\r\n      .then(function(data) {\r\n        return data;\r\n      });\r\n\r\n    //return app.store.find(\"google/search\", this.requestParams());\r\n  }\r\n\r\n  /**\r\n   * Load the next page of google search results.\r\n   *\r\n   * @public\r\n   */\r\n  loadMore() {\r\n    this.loading = true;\r\n\r\n    this.loadResults(this.googleresults.length).then(\r\n      this.parseResults.bind(this)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Parse results and append them to the google search list.\r\n   *\r\n   * @param {Array} results\r\n   * @return {Array}\r\n   */\r\n  parseResults(results) {\r\n    [].push.apply(this.googleresults, results);\r\n\r\n    this.loading = false;\r\n    this.moreResults = false;\r\n\r\n    m.lazyRedraw();\r\n\r\n    return results;\r\n  }\r\n\r\n  /**\r\n   * Remove a google search from the list if it is present.\r\n   *\r\n   * @param {Array} list\r\n   * @public\r\n   */\r\n  removeList(list) {\r\n    const index = this.googleresults.indexOf(list);\r\n\r\n    if (index !== -1) {\r\n      this.googleresults.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add a google search to the top of the list.\r\n   *\r\n   * @param {Array} list\r\n   * @public\r\n   */\r\n  addList(list) {\r\n    this.googleresults.unshift(list);\r\n  }\r\n}\r\n","import Component from \"flarum/Component\";\r\n\r\nexport default class GoogleSearchListItem extends Component {\r\n  view() {\r\n    const info = this.props.info;\r\n    return (\r\n      <div className=\"DiscussionListItem\">\r\n        <a href={info.url} className=\"DiscussionListItem-main\" target=\"_blank\">\r\n          <h3 className=\"DiscussionListItem-title\">{info.title}</h3>\r\n          <ul className=\"DiscussionListItem-info\">\r\n            <li className=\"item-excerpt\">\r\n              <span>{info.content}</span>\r\n            </li>\r\n          </ul>\r\n        </a>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { extend } from \"flarum/extend\";\r\nimport app from \"flarum/app\";\r\nimport Page from \"flarum/components/Page\";\r\nimport ItemList from \"flarum/utils/ItemList\";\r\nimport listItems from \"flarum/helpers/listItems\";\r\nimport IndexPage from \"flarum/components/IndexPage\";\r\nimport Alert from \"flarum/components/Alert\";\r\nimport LogInModal from \"flarum/components/LogInModal\";\r\nimport Button from \"flarum/components/Button\";\r\nimport LinkButton from \"flarum/components/LinkButton\";\r\nimport SelectDropdown from \"flarum/components/SelectDropdown\";\r\nimport GoogleSearchList from \"./GoogleSearchList\";\r\n\r\n/**\r\n * The `IndexPage` component displays the index page, including the welcome\r\n * hero, the sidebar, and the discussion list.\r\n */\r\nexport default class GoogleSearchPage extends Page {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    const params = this.params();\r\n    this.bodyClass = \"App--index\";\r\n\r\n    // If the user is coming from the discussion list, then they have either\r\n    // just switched one of the parameters (filter, sort, search) or they\r\n    // probably want to refresh the results. We will clear the discussion list\r\n    // cache so that results are reloaded.\r\n    if (app.previous instanceof GoogleSearchPage) {\r\n      app.cache.googleSearchList = null;\r\n    }\r\n\r\n    if (app.cache.googleSearchList) {\r\n      // Compare the requested parameters (sort, search query) to the ones that\r\n      // are currently present in the cached discussion list. If they differ, we\r\n      // will clear the cache and set up a new discussion list component with\r\n      // the new parameters.\r\n      Object.keys(params).some(key => {\r\n        if (app.cache.googleSearchList.props.params[key] !== params[key]) {\r\n          app.cache.googleSearchList = null;\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n\r\n    if (!app.cache.googleSearchList) {\r\n      app.cache.googleSearchList = new GoogleSearchList({ params });\r\n    }\r\n    if (!app.session.user) {\r\n      this.alertNotice();\r\n      app.modal.show(new LogInModal());\r\n      return true;\r\n    }\r\n  }\r\n  \r\n  onunload() {\r\n    // Save the scroll position so we can restore it when we return to the\r\n    // result list.\r\n    app.cache.scrollTop = $(window).scrollTop();\r\n  }\r\n\r\n  view() {\r\n    return (\r\n      <div className=\"IndexPage\">\r\n        {IndexPage.prototype.hero()}\r\n        <div className=\"container\">\r\n          <div className=\"sideNavContainer\">\r\n            <nav className=\"IndexPage-nav sideNav\">\r\n              <ul>{listItems(this.sidebarItems().toArray())}</ul>\r\n            </nav>\r\n            <div className=\"IndexPage-results sideNavOffset\">\r\n              <div className=\"IndexPage-toolbar\">\r\n                <ul className=\"IndexPage-toolbar-view\"></ul>\r\n                <ul className=\"IndexPage-toolbar-action\">\r\n                  {listItems(this.actionItems().toArray())}\r\n                </ul>\r\n              </div>\r\n              {app.cache.googleSearchList.render()}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  config(isInitialized, context) {\r\n    super.config(...arguments);\r\n\r\n    if (isInitialized) return;\r\n\r\n    extend(context, \"onunload\", () => $(\"#app\").css(\"min-height\", \"\"));\r\n\r\n    app.setTitle(\"\");\r\n    app.setTitleCount(0);\r\n\r\n    // Work out the difference between the height of this hero and that of the\r\n    // previous hero. Maintain the same scroll position relative to the bottom\r\n    // of the hero so that the sidebar doesn't jump around.\r\n    const oldHeroHeight = app.cache.heroHeight;\r\n    const heroHeight = (app.cache.heroHeight =\r\n      this.$(\".Hero\").outerHeight() || 0);\r\n    const scrollTop = app.cache.scrollTop;\r\n\r\n    $(\"#app\").css(\"min-height\", $(window).height() + heroHeight);\r\n\r\n    // Scroll to the remembered position. We do this after a short delay so that\r\n    // it happens after the browser has done its own \"back button\" scrolling,\r\n    // which isn't right. https://github.com/flarum/core/issues/835\r\n    const scroll = () =>\r\n      $(window).scrollTop(scrollTop - oldHeroHeight + heroHeight);\r\n    scroll();\r\n    setTimeout(scroll, 1);\r\n  }\r\n\r\n  alertNotice() {\r\n    let alert;\r\n    app.alerts.show(\r\n      (alert = new Alert({\r\n        type: \"error\",\r\n        children: app.translator.trans(\r\n          \"irony-google-search.forum.page.notice_text\"\r\n        )\r\n      }))\r\n    );\r\n    // 5秒后自动关闭\r\n    setTimeout(function() {\r\n      app.alerts.dismiss(alert);\r\n    }, 3000);\r\n  }\r\n\r\n  /**\r\n   * Build an item list for the sidebar of the index page. By default this is a\r\n   * \"New Discussion\" button, and then a DropdownSelect component containing a\r\n   * list of navigation items.\r\n   *\r\n   * @return {ItemList}\r\n   */\r\n  sidebarItems() {\r\n    const items = IndexPage.prototype.sidebarItems();\r\n\r\n    items.replace(\r\n      \"nav\",\r\n      SelectDropdown.component({\r\n        children: this.navItems(this).toArray(),\r\n        buttonClassName: \"Button\",\r\n        className: \"App-titleControl\"\r\n      })\r\n    );\r\n\r\n    return items;\r\n  }\r\n\r\n  /**\r\n   * Build an item list for the navigation in the sidebar of the index page. By\r\n   * default this is just the 'All Discussions' link.\r\n   *\r\n   * @return {ItemList}\r\n   */\r\n  navItems() {\r\n    const items = IndexPage.prototype.navItems();\r\n    const params = this.stickyParams();\r\n\r\n    items.add(\r\n      \"irony-google-search\",\r\n      LinkButton.component({\r\n        href: app.route(\"irony_google_search\", params),\r\n        children: app.translator.trans(\"irony-google-search.forum.page.nav\"),\r\n        icon: \"fab fa-google\"\r\n      }),\r\n      85\r\n    );\r\n\r\n    return items;\r\n  }\r\n\r\n  /**\r\n   * Build an item list for the part of the toolbar which is about taking action\r\n   * on the results. By default this is just a \"mark all as read\" button.\r\n   *\r\n   * @return {ItemList}\r\n   */\r\n  actionItems() {\r\n    const items = new ItemList();\r\n\r\n    // 刷新按钮\r\n    items.add(\r\n      \"refresh\",\r\n      Button.component({\r\n        title: app.translator.trans(\"core.forum.index.refresh_tooltip\"),\r\n        icon: \"fas fa-sync\",\r\n        className: \"Button Button--icon\",\r\n        onclick: () => {\r\n          if (app.session.user) {\r\n            app.cache.googleSearchList.refresh();\r\n          } else {\r\n            this.alertNotice();\r\n            app.modal.show(new LogInModal());\r\n          }\r\n        }\r\n      })\r\n    );\r\n\r\n    return items;\r\n  }\r\n\r\n  /**\r\n   * Return the current search query, if any. This is implemented to activate\r\n   * the search box in the header.\r\n   *\r\n   * @see Search\r\n   * @return {String}\r\n   */\r\n  searching() {\r\n    return this.params();\r\n  }\r\n\r\n  /**\r\n   * Redirect to the index page without a search filter. This is called when the\r\n   * 'x' is clicked in the search box in the header.\r\n   *\r\n   * @see Search\r\n   */\r\n  clearSearch() {\r\n    m.route(app.route(this.props.routeName, {}));\r\n  }\r\n\r\n  /**\r\n   * Get URL parameters that stick between filter changes.\r\n   *\r\n   * @return {Object}\r\n   */\r\n  stickyParams() {\r\n    return m.route.param();\r\n  }\r\n\r\n  /**\r\n   * Get parameters to pass to the GoogleSearchList component.\r\n   *\r\n   * @return {Object}\r\n   */\r\n  params() {\r\n    return m.route.param();\r\n  }\r\n}\r\n","import { extend } from \"flarum/extend\";\r\nimport app from \"flarum/app\";\r\nimport DiscussionsSearchSource from \"flarum/components/DiscussionsSearchSource\";\r\nimport LinkButton from \"flarum/components/LinkButton\";\r\nimport IndexPage from \"flarum/components/IndexPage\";\r\nimport GoogleSearchPage from \"./components/GoogleSearchPage\";\r\n\r\n// Allow other extensions to extend the page\r\nexport { GoogleSearchPage };\r\n\r\napp.initializers.add(\"irony-google-search\", app => {\r\n  // 扩展路由到指定页面\r\n  app.routes.irony_google_search = {\r\n    path: \"/google\",\r\n    component: GoogleSearchPage.component()\r\n  };\r\n\r\n  // 增加搜索框扩展显示\r\n  extend(DiscussionsSearchSource.prototype, \"view\", function(view, query) {\r\n    if (!view) {\r\n      return;\r\n    }\r\n\r\n    query = query.toLowerCase();\r\n\r\n    view.splice(\r\n      100, // 尽量排在最后\r\n      0,\r\n      <li className=\"Dropdown-header\">\r\n        {app.translator.trans(\r\n          \"irony-google-search.forum.search.search_heading\"\r\n        )}\r\n      </li>,\r\n      <li>\r\n        {LinkButton.component({\r\n          icon: \"fas fa-search\",\r\n          href: app.route(\"irony_google_search\", { q: query })\r\n        },\r\n        app.translator.trans('irony-google-search.forum.search.all_search_button', { query })\r\n        )}\r\n      </li>\r\n    );\r\n  });\r\n\r\n  // 增加左侧导航显示\r\n  extend(IndexPage.prototype, \"navItems\", items => {\r\n    items.add(\r\n      \"irony-google-search\",\r\n      LinkButton.component({\r\n        href: app.route(\"irony_google_search\"),\r\n        icon: \"fab fa-google\"\r\n      },\r\n      app.translator.trans('irony-google-search.forum.page.nav')\r\n      ),\r\n      85\r\n    );\r\n  });\r\n});\r\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/DiscussionsSearchSource'];","module.exports = flarum.core.compat['components/IndexPage'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/LogInModal'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/Placeholder'];","module.exports = flarum.core.compat['components/SelectDropdown'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['utils/ItemList'];"],"sourceRoot":""}